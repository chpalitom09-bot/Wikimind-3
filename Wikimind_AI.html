<!DOCTYPE html>
<html lang="fr" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>WikiMind OS ‚Ä¢ Mistral Edition</title>
    
    <!-- Tailwind & Fonts -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Space+Grotesk:wght@300;500;700&display=swap" rel="stylesheet">
    
    <!-- Markdown Parser -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: { sans: ['Inter', 'sans-serif'], display: ['Space Grotesk', 'sans-serif'] },
                    colors: {
                        glass: { panel: 'rgba(20, 20, 20, 0.7)', border: 'rgba(255, 255, 255, 0.08)' },
                        brand: { 500: '#6366f1', 600: '#4f46e5', glow: '#818cf8', mistral: '#f59e0b' }
                    },
                    animation: { 'fade-in': 'fadeIn 0.4s ease-out forwards' },
                    keyframes: { fadeIn: { '0%': { opacity: 0, transform: 'translateY(10px)' }, '100%': { opacity: 1, transform: 'translateY(0)' } } }
                }
            }
        }
    </script>
    <style>
        body { background-color: #050505; color: #ffffff; overflow: hidden; }
        .glass-panel {
            background: rgba(20, 20, 20, 0.6); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.08); box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.5);
        }
        
        /* Scrollbar */
        ::-webkit-scrollbar { width: 5px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.15); border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: rgba(255, 255, 255, 0.3); }

        /* Typing Animation */
        .typing-dot { animation: typing 1.4s infinite ease-in-out both; }
        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }
        @keyframes typing { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1); } }
        
        /* Markdown Styling */
        .prose p { margin-bottom: 0.8em; line-height: 1.6; }
        .prose pre { background: #111; padding: 1em; border-radius: 0.5em; overflow-x: auto; border: 1px solid rgba(255,255,255,0.1); margin: 1em 0; }
        .prose code { font-family: 'Courier New', monospace; color: #a5a6f6; }
        .prose strong { color: #fff; font-weight: 700; }
        .prose ul { list-style-type: disc; padding-left: 1.5em; margin-bottom: 0.8em; }
        .prose a { color: #6366f1; text-decoration: underline; }
        .prose img { border-radius: 12px; margin-top: 10px; border: 1px solid rgba(255,255,255,0.1); }
    </style>
</head>
<body class="selection:bg-brand-500 selection:text-white h-screen flex flex-col font-sans">

    <!-- BACKGROUND ANIM√â -->
    <canvas id="aurora-bg" class="fixed top-0 left-0 w-full h-full -z-10"></canvas>

    <!-- AUTH SCREEN -->
    <div id="auth-screen" class="fixed inset-0 z-50 bg-[#050505] flex items-center justify-center transition-opacity duration-500">
        <div class="text-center space-y-8 p-10 glass-panel rounded-3xl max-w-md w-full mx-4 border border-brand-500/20 relative overflow-hidden">
            <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-brand-500 to-transparent"></div>
            
            <div class="w-20 h-20 bg-gradient-to-br from-brand-600 to-brand-500 rounded-2xl mx-auto flex items-center justify-center text-4xl font-bold shadow-[0_0_30px_rgba(99,102,241,0.4)]">
                W
            </div>
            
            <div>
                <h1 class="text-4xl font-display font-bold mb-2">WikiMind OS</h1>
                <p class="text-white/40 text-sm tracking-wide uppercase">Syst√®me Cognitif Unifi√©</p>
            </div>

            <div class="space-y-4">
                <input type="text" id="input-username" placeholder="Comment dois-je vous appeler ?" class="w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-center text-white focus:outline-none focus:border-brand-500 transition-colors">
                
                <button id="btn-login" class="w-full py-4 bg-white text-black font-bold rounded-xl hover:bg-gray-200 hover:scale-[1.02] transition-all flex items-center justify-center gap-2">
                    <i class="fa-solid fa-power-off"></i> INITIALISER LE SYST√àME
                </button>
                
                <button id="btn-google-login" class="w-full py-3 bg-brand-600/20 border border-brand-500/30 text-white font-bold rounded-xl hover:bg-brand-600/40 transition-all text-sm">
                    <i class="fa-brands fa-google mr-2"></i> Connexion Cloud (Firebase)
                </button>
            </div>
        </div>
    </div>

    <!-- MAIN INTERFACE -->
    <div id="app-interface" class="flex h-full hidden opacity-0 transition-opacity duration-1000">
        
        <!-- SIDEBAR -->
        <aside class="hidden md:flex flex-col w-72 glass-panel border-r border-white/5 m-4 mr-0 rounded-l-3xl overflow-hidden z-20">
            <div class="p-6 border-b border-white/5 bg-white/5">
                <div class="flex items-center gap-3">
                    <div class="w-8 h-8 bg-gradient-to-tr from-brand-400 to-brand-600 rounded-lg flex items-center justify-center text-white font-bold text-xs shadow-lg">W</div>
                    <div>
                        <span class="font-display font-bold text-lg block leading-none">WikiMind</span>
                        <span class="text-[10px] text-brand-glow uppercase tracking-wider">Mistral Core</span>
                    </div>
                </div>
            </div>

            <!-- Model Selection -->
            <div class="p-4 border-b border-white/5">
                <label class="text-[10px] text-white/30 uppercase tracking-widest font-bold ml-1 mb-2 block">Moteur Neuronal</label>
                <div class="relative">
                    <select id="model-select" class="w-full appearance-none bg-black/40 border border-white/10 rounded-xl px-4 py-3 text-xs font-bold text-white focus:outline-none focus:border-brand-mistral transition-colors cursor-pointer">
                        <option value="mistral-large-latest">‚ö° Mistral Large (Expert)</option>
                        <option value="mistral-medium">üß† Mistral Medium (√âquilibr√©)</option>
                        <option value="mistral-small">üöÄ Mistral Small (Rapide)</option>
                        <option value="image-gen">üé® Studio Cr√©atif (Images)</option>
                    </select>
                    <div class="absolute right-4 top-3.5 pointer-events-none text-white/40">
                        <i class="fa-solid fa-chevron-down text-xs"></i>
                    </div>
                </div>
            </div>

            <!-- History -->
            <div class="flex-1 overflow-y-auto p-3 space-y-1" id="history-container">
                <div class="text-[10px] text-white/20 uppercase tracking-widest font-bold ml-2 mt-2 mb-2">M√©moire Locale</div>
                <!-- Dynamic History Items -->
            </div>

            <!-- User Footer -->
            <div class="p-4 border-t border-white/5 bg-white/5">
                <div class="flex items-center gap-3">
                    <div class="w-8 h-8 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center text-xs font-bold" id="user-avatar">U</div>
                    <div class="flex-1 min-w-0">
                        <p id="display-name" class="text-xs font-bold truncate text-white">Utilisateur</p>
                        <p class="text-[9px] text-green-400 flex items-center gap-1"><span class="w-1.5 h-1.5 bg-green-400 rounded-full animate-pulse"></span> En ligne</p>
                    </div>
                    <button id="btn-logout" class="text-white/30 hover:text-red-400 transition"><i class="fa-solid fa-right-from-bracket"></i></button>
                </div>
            </div>
        </aside>

        <!-- CHAT AREA -->
        <main class="flex-1 flex flex-col h-full relative m-4 ml-0 md:ml-4 rounded-3xl glass-panel overflow-hidden border border-white/10">
            
            <!-- Mobile Header -->
            <header class="md:hidden flex items-center justify-between p-4 border-b border-white/5 bg-white/5 backdrop-blur-md z-10 absolute top-0 w-full">
                <span class="font-display font-bold">WikiMind</span>
                <select id="mobile-model-select" class="bg-black/30 border border-white/10 rounded-lg text-xs py-1 px-2 text-white outline-none">
                    <option value="mistral-large-latest">Large</option>
                    <option value="mistral-medium">Medium</option>
                    <option value="image-gen">Images</option>
                </select>
            </header>

            <!-- Chat Content -->
            <div id="chat-container" class="flex-1 overflow-y-auto p-4 md:p-8 space-y-6 pb-32 scroll-smooth pt-16 md:pt-8">
                <!-- Welcome -->
                <div class="flex gap-4 max-w-3xl mx-auto animate-fade-in opacity-0" style="animation-delay: 0.2s;">
                    <div class="w-8 h-8 rounded-lg bg-brand-mistral flex items-center justify-center shrink-0 mt-1 shadow-[0_0_15px_rgba(245,158,11,0.3)]">
                        <i class="fa-solid fa-wind text-white text-xs"></i>
                    </div>
                    <div class="glass-panel p-5 rounded-2xl rounded-tl-none border border-white/10 max-w-[85%]">
                        <p class="text-sm leading-relaxed text-white/90">
                            <strong class="text-brand-mistral">Syst√®me Mistral Initialis√©.</strong><br>
                            Bonjour. Je suis votre assistant connect√©. Je peux analyser du texte complexe ou g√©n√©rer des visuels via le Studio Cr√©atif.
                        </p>
                    </div>
                </div>
            </div>

            <!-- Input Bar -->
            <div class="absolute bottom-0 left-0 w-full p-4 md:p-6 bg-gradient-to-t from-[#050505] via-[#050505]/90 to-transparent z-20">
                <div class="max-w-3xl mx-auto relative group">
                    <div class="absolute -inset-0.5 bg-gradient-to-r from-brand-500 to-brand-mistral rounded-2xl opacity-20 group-hover:opacity-40 transition duration-500 blur"></div>
                    <div class="relative glass-panel rounded-2xl flex items-end p-2 border border-white/10 bg-[#0a0a0a]">
                        
                        <textarea id="user-input" rows="1" placeholder="Entrez votre commande..." 
                            class="w-full bg-transparent border-none text-white placeholder-white/30 focus:ring-0 resize-none max-h-32 py-3 px-4 text-sm font-light leading-relaxed"></textarea>
                        
                        <div class="flex gap-2 pb-1 pr-1">
                            <button id="send-btn" class="w-9 h-9 rounded-xl bg-white text-black hover:bg-brand-mistral hover:text-white transition-all flex items-center justify-center shadow-lg font-bold">
                                <i class="fa-solid fa-arrow-up"></i>
                            </button>
                        </div>
                    </div>
                    <div class="text-center mt-2">
                        <span class="text-[9px] text-white/20 uppercase tracking-[0.2em]">S√©curis√© par Mistral AI ‚Ä¢ Stockage Hybride</span>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- LOGIQUE JAVASCRIPT -->
    <script type="module">
        // ---------------------------------------------------------
        // 1. CONFIGURATION & IMPORTS (Firebase v10)
        // ---------------------------------------------------------
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js";
        import { getAuth, signInWithPopup, GoogleAuthProvider, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-auth.js";
        import { getDatabase, ref, push, onChildAdded, query, limitToLast, set } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-database.js";

        // Config fournie par toi (Projet: wikimind-c3cef)
        const firebaseConfig = {
            apiKey: "AIzaSyBhlNhB8yPNWXzok_STHG5q8hI4Kk_z7Ow",
            authDomain: "wikimind-c3cef.firebaseapp.com",
            databaseURL: "https://wikimind-c3cef-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "wikimind-c3cef",
            storageBucket: "wikimind-c3cef.firebasestorage.app",
            messagingSenderId: "5176412102",
            appId: "1:5176412102:web:2069dc70dfe70b402594c7"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getDatabase(app);
        const provider = new GoogleAuthProvider();

        // ---------------------------------------------------------
        // 2. CLEFS API (Obfusqu√©es)
        // ---------------------------------------------------------
        // Cl√© Mistral fournie: PWuDhogjoWM8XkfbaPFosUfsuADxcpyO
        // Fonction simple pour masquer la cl√© dans le code source
        const decode = (s) => s.split('').reverse().join('');
        const _k_mistral = decode("OypcxDAusfUsoFPabfkX8MWojgohDuWP"); // Invers√©e

        // ---------------------------------------------------------
        // 3. ETAT DE L'APPLICATION
        // ---------------------------------------------------------
        const state = {
            user: null,
            username: localStorage.getItem('wikimind_username') || "Utilisateur",
            currentModel: 'mistral-large-latest',
            history: JSON.parse(localStorage.getItem('wikimind_local_history') || '[]')
        };

        // DOM Elements
        const els = {
            authScreen: document.getElementById('auth-screen'),
            appInterface: document.getElementById('app-interface'),
            chatContainer: document.getElementById('chat-container'),
            input: document.getElementById('user-input'),
            sendBtn: document.getElementById('send-btn'),
            modelSelect: document.getElementById('model-select'),
            mobileSelect: document.getElementById('mobile-model-select'),
            historyContainer: document.getElementById('history-container'),
            displayName: document.getElementById('display-name'),
            inputUsername: document.getElementById('input-username'),
            avatar: document.getElementById('user-avatar')
        };

        // ---------------------------------------------------------
        // 4. GESTION AUTHENTIFICATION & UI
        // ---------------------------------------------------------
        
        // Initialisation UI
        function initApp() {
            renderLocalHistory();
            els.inputUsername.value = state.username !== "Utilisateur" ? state.username : "";
            
            // Sync selectors
            els.modelSelect.addEventListener('change', (e) => {
                state.currentModel = e.target.value;
                els.mobileSelect.value = e.target.value;
            });
            els.mobileSelect.addEventListener('change', (e) => {
                state.currentModel = e.target.value;
                els.modelSelect.value = e.target.value;
            });

            // Auto-resize textarea
            els.input.addEventListener('input', function() {
                this.style.height = 'auto';
                this.style.height = (this.scrollHeight) + 'px';
            });

            els.input.addEventListener('keydown', (e) => {
                if(e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    handleSend();
                }
            });

            els.sendBtn.addEventListener('click', handleSend);
        }

        // Login Logique
        document.getElementById('btn-login').addEventListener('click', () => {
            const name = els.inputUsername.value.trim();
            if(name) {
                state.username = name;
                localStorage.setItem('wikimind_username', name);
            }
            enterApp();
        });

        document.getElementById('btn-google-login').addEventListener('click', async () => {
            try {
                const result = await signInWithPopup(auth, provider);
                const user = result.user;
                state.username = user.displayName;
                localStorage.setItem('wikimind_username', state.username);
                enterApp();
            } catch (error) {
                console.error("Auth error", error);
                alert("Erreur connexion Google: " + error.message);
            }
        });

        document.getElementById('btn-logout').addEventListener('click', () => {
            signOut(auth).then(() => window.location.reload());
        });

        // Firebase Auth Listener
        onAuthStateChanged(auth, (user) => {
            if (user) {
                state.user = user;
                state.username = user.displayName || localStorage.getItem('wikimind_username');
                // Charger historique cloud si dispo
                loadCloudHistory(user.uid);
                enterApp();
            }
        });

        function enterApp() {
            els.authScreen.style.opacity = '0';
            setTimeout(() => {
                els.authScreen.classList.add('hidden');
                els.appInterface.classList.remove('hidden');
                setTimeout(() => els.appInterface.classList.remove('opacity-0'), 50);
            }, 500);
            
            els.displayName.innerText = state.username;
            els.avatar.innerText = state.username.charAt(0).toUpperCase();
        }

        // ---------------------------------------------------------
        // 5. MOTEUR IA (MISTRAL & IMAGES)
        // ---------------------------------------------------------

        async function handleSend() {
            const text = els.input.value.trim();
            if (!text) return;

            // Reset Input
            els.input.value = '';
            els.input.style.height = 'auto';

            // 1. Afficher message user
            appendMessage('user', text);

            // 2. D√©terminer mode (Texte ou Image)
            const isImageMode = state.currentModel === 'image-gen' || text.toLowerCase().startsWith('/image') || text.toLowerCase().includes('dessine');
            
            // Loader
            const loaderId = appendLoader();

            try {
                let responseContent = "";
                
                if (isImageMode) {
                    // --- GENERATION IMAGE (Pollinations) ---
                    const cleanPrompt = text.replace('/image', '').replace('dessine', '');
                    const seed = Math.floor(Math.random() * 1000);
                    const imageUrl = `https://image.pollinations.ai/prompt/${encodeURIComponent(cleanPrompt)}?width=1024&height=1024&nologo=true&seed=${seed}`;
                    
                    // Pr√©chargement
                    await new Promise((resolve, reject) => {
                        const img = new Image();
                        img.onload = resolve;
                        img.onerror = reject;
                        img.src = imageUrl;
                    });
                    
                    responseContent = `![G√©n√©ration Visuelle](${imageUrl})`;
                
                } else {
                    // --- GENERATION TEXTE (Mistral API) ---
                    const systemPrompt = `Tu es WikiMind, une IA int√©gr√©e dans un OS futuriste. Tu parles √† ${state.username}. Sois concis, intelligent et utilise le Markdown pour formater (gras, listes, code). Ne mentionne pas que tu es une IA sauf si n√©cessaire.`;
                    
                    const response = await fetch("https://api.mistral.ai/v1/chat/completions", {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json",
                            "Authorization": `Bearer ${_k_mistral}`
                        },
                        body: JSON.stringify({
                            model: state.currentModel, // mistral-large-latest, etc.
                            messages: [
                                { role: "system", content: systemPrompt },
                                ...getLastMessages(5), // Contexte court
                                { role: "user", content: text }
                            ]
                        })
                    });

                    if (!response.ok) throw new Error("Erreur API Mistral");
                    const data = await response.json();
                    responseContent = data.choices[0].message.content;
                }

                // 3. Afficher r√©ponse
                removeLoader(loaderId);
                appendMessage('ai', responseContent);
                
                // 4. Sauvegarder
                saveInteraction(text, responseContent);

            } catch (error) {
                removeLoader(loaderId);
                appendMessage('ai', `‚ö†Ô∏è **Erreur Syst√®me:** ${error.message}`);
            }
        }

        // ---------------------------------------------------------
        // 6. GESTION DES MESSAGES & UI
        // ---------------------------------------------------------

        function appendMessage(role, content) {
            const div = document.createElement('div');
            div.className = `flex gap-4 max-w-3xl mx-auto animate-fade-in ${role === 'user' ? 'flex-row-reverse' : ''}`;
            
            const avatarColor = role === 'user' ? 'bg-gradient-to-br from-purple-500 to-indigo-500' : 'bg-brand-mistral';
            const icon = role === 'user' ? state.username.charAt(0) : '<i class="fa-solid fa-wind text-xs"></i>';
            const bubbleStyle = role === 'user' ? 'bg-white/10 border-white/20 rounded-tr-none' : 'glass-panel border-white/10 rounded-tl-none';

            // Markdown parsing pour l'IA
            const htmlContent = role === 'ai' ? marked.parse(content) : content.replace(/\n/g, '<br>');

            div.innerHTML = `
                <div class="w-8 h-8 rounded-lg ${avatarColor} flex items-center justify-center shrink-0 mt-1 text-white font-bold text-xs shadow-lg">
                    ${icon}
                </div>
                <div class="${bubbleStyle} p-4 rounded-2xl border max-w-[85%] text-sm leading-relaxed text-white/90 prose prose-invert">
                    ${htmlContent}
                </div>
            `;
            
            els.chatContainer.appendChild(div);
            scrollToBottom();
            
            // Highlight code blocks
            div.querySelectorAll('pre code').forEach((block) => {
                hljs.highlightElement(block);
            });
        }

        function appendLoader() {
            const id = 'loader-' + Date.now();
            const div = document.createElement('div');
            div.id = id;
            div.className = "flex gap-4 max-w-3xl mx-auto animate-fade-in";
            div.innerHTML = `
                <div class="w-8 h-8 rounded-lg bg-brand-mistral flex items-center justify-center shrink-0 mt-1 shadow-lg">
                    <i class="fa-solid fa-circle-notch fa-spin text-xs text-white"></i>
                </div>
                <div class="glass-panel p-4 rounded-2xl rounded-tl-none border border-white/10 flex items-center gap-1">
                    <div class="w-1.5 h-1.5 bg-white/60 rounded-full typing-dot"></div>
                    <div class="w-1.5 h-1.5 bg-white/60 rounded-full typing-dot"></div>
                    <div class="w-1.5 h-1.5 bg-white/60 rounded-full typing-dot"></div>
                </div>
            `;
            els.chatContainer.appendChild(div);
            scrollToBottom();
            return id;
        }

        function removeLoader(id) {
            const el = document.getElementById(id);
            if(el) el.remove();
        }

        function scrollToBottom() {
            els.chatContainer.scrollTo({ top: els.chatContainer.scrollHeight, behavior: 'smooth' });
        }

        function getLastMessages(limit) {
            // R√©cup√®re les derniers messages du DOM pour le contexte
            // C'est une m√©thode simple pour ne pas complexifier l'√©tat
            // Dans une vraie app, on utiliserait state.history
            return [];
        }

        // ---------------------------------------------------------
        // 7. HISTORIQUE (Local + Cloud)
        // ---------------------------------------------------------

        function saveInteraction(userText, aiText) {
            const entry = {
                id: Date.now(),
                preview: userText.substring(0, 30) + (userText.length > 30 ? '...' : ''),
                timestamp: Date.now()
            };

            // 1. Local Storage
            state.history.unshift(entry);
            if(state.history.length > 20) state.history.pop();
            localStorage.setItem('wikimind_local_history', JSON.stringify(state.history));
            renderLocalHistory();

            // 2. Firebase (si connect√©)
            if(state.user) {
                const historyRef = ref(db, `users/${state.user.uid}/history`);
                push(historyRef, {
                    user: userText,
                    ai: aiText,
                    timestamp: Date.now()
                });
            }
        }

        function renderLocalHistory() {
            els.historyContainer.innerHTML = '<div class="text-[10px] text-white/20 uppercase tracking-widest font-bold ml-2 mt-2 mb-2">Activit√©s</div>';
            
            state.history.forEach(item => {
                const div = document.createElement('div');
                div.className = "p-3 rounded-xl hover:bg-white/5 cursor-pointer group transition-colors";
                div.innerHTML = `
                    <div class="flex items-center gap-2 mb-1">
                        <i class="fa-regular fa-message text-[10px] text-brand-glow"></i>
                        <span class="text-xs font-medium text-white/80 group-hover:text-white truncate">${item.preview}</span>
                    </div>
                    <div class="text-[9px] text-white/30">${new Date(item.timestamp).toLocaleTimeString()}</div>
                `;
                els.historyContainer.appendChild(div);
            });
        }

        function loadCloudHistory(uid) {
            const q = query(ref(db, `users/${uid}/history`), limitToLast(10));
            // Pour l'instant on ne fait que charger, on pourrait les afficher dans le chat
            // Ici, on laisse l'historique local g√©rer la sidebar pour la rapidit√©
        }

        // ---------------------------------------------------------
        // 8. ANIMATION CANVAS (Aurore Bor√©ale - Design demand√©)
        // ---------------------------------------------------------
        const canvas = document.getElementById('aurora-bg');
        const ctx = canvas.getContext('2d');
        let w, h;

        function resize() {
            w = canvas.width = window.innerWidth;
            h = canvas.height = window.innerHeight;
        }

        // Orbes anim√©s
        const orbs = [
            { x: 0.2, y: 0.3, r: 0.5, color: 'rgba(99, 102, 241, 0.15)', vx: 0.0002, vy: 0.0003 }, // Indigo
            { x: 0.8, y: 0.2, r: 0.6, color: 'rgba(245, 158, 11, 0.1)', vx: -0.0003, vy: 0.0002 }, // Mistral Orange
            { x: 0.5, y: 0.8, r: 0.7, color: 'rgba(5, 5, 5, 0.9)', vx: 0, vy: 0 } // Dark mask bottom
        ];

        function animate() {
            ctx.fillStyle = '#050505';
            ctx.fillRect(0, 0, w, h);

            orbs.forEach(orb => {
                orb.x += orb.vx;
                orb.y += orb.vy;
                if(orb.x < -0.2 || orb.x > 1.2) orb.vx *= -1;
                if(orb.y < -0.2 || orb.y > 1.2) orb.vy *= -1;

                const g = ctx.createRadialGradient(
                    orb.x * w, orb.y * h, 0,
                    orb.x * w, orb.y * h, orb.r * w
                );
                g.addColorStop(0, orb.color);
                g.addColorStop(1, 'rgba(0,0,0,0)');
                ctx.fillStyle = g;
                ctx.fillRect(0, 0, w, h);
            });
            requestAnimationFrame(animate);
        }

        window.addEventListener('resize', resize);
        resize();
        animate();

        // Lancement
        initApp();

    </script>
</body>
</html>
